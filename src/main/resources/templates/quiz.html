<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/style.css?v=1.5">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">
    <title>Quiz</title>
    <!-- Inline Thymeleaf variables first -->
    <script>
        window.initialTimeRemaining = [[${timer}]]; // Define globally to avoid redeclaration in quiz.js
    </script>
    <!-- Include the external JavaScript file -->
    <script th:src="@{/js/quiz.js?v=1.5}"></script>
</head>
<body>
<div class="container">
    <div class="content">
        <h1 class="page-heading">Multiplications - Level: <span th:text="${level}">1</span></h1>
        <div class="side">
            <div class="progress-wrapper">
                <div class="row">
                    <div class="blok dark-orange icon-speaker">
                        <a id="listenQuizButton" href="javascript:void(0);" style="display: flex; align-items: center; gap: 10px; text-decoration: none; color: #fff">
                            <i id="quizSpeakerIcon" class="fas fa-volume-up" style="font-size: 24px;"></i>
                        </a>
                    </div>
                </div>
                <div class="row">
                    <div class="blok blue icon-clock">
                        <i class="fas fa-check-circle" style="font-size: 20px; margin-right: 10px;"></i>
                        <span id="scoreText" th:text="${score}">0 / 0</span>
                    </div>
                </div>
            </div>
            <div class="clock-wrapper">
                <div class="clock" id="timer" style="background: rgb(255, 255, 255);">
                    <p><span th:text="${timer}">60</span></p>
                </div>
            </div>
        </div>

        <div class="question-answer-container">
            <div class="question"><span id="questionText" th:text="${question}">What is 1 x 1?</span> =
            </div>
            <div class="answer">
                <form id="quizForm" onsubmit="event.preventDefault(); submitAnswer();">
                    <input type="number" class="answer-box" id="answerInput" name="answer"
                           placeholder="Enter your answer" required/>
                    <input type="hidden" id="timeRemainingInput" name="timeRemaining" th:value="${timer}"/>
                    <button type="submit" class="button">Submit Answer</button>
                </form>
            </div>
        </div>
    </div>
</div>

<div id="modal" class="modal-overlay">
    <div class="modal-content">
        <div class="modal-header">
            <span>Enable Audio !</span>
            <button id="closeModalButton">X</button>
        </div>
        <div class="modal-body">
            <p>To enjoy the experience, tap "Enable Audio" to start the voice guidance.</p>
        </div>
        <div class="modal-footer">
            <div class="icon-button-container">
                <a class="mat-mdc-icon-button green" id="enableAudioButton" href="javascript:void(0);" style="display: flex; align-items: center; gap: 10px; text-decoration: none; color: #fff">
                    <span id="speakerIconUp" class="material-symbols-outlined">volume_up</span>
                </a>
                <a class="mat-mdc-icon-button orange" id="noButton" href="javascript:void(0);" style="display: flex; align-items: center; gap: 10px; text-decoration: none; color: #fff">
                    <span id="speakerIconOff" class="material-symbols-outlined">volume_off</span>
                </a>
            </div>
        </div>
    </div>
</div>

</body>
</html>
